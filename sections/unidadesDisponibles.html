<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unidades Disponibles - Larrosa Camiones</title>
    <link rel="icon" href="../assets/favicon.png" type="image/png">

    
    <!-- CSS Files -->
    <link rel="stylesheet" href="../styles/main.css">
    
    <!-- External Libraries -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- CSS CORREGIDO INLINE -->
    <style>
        /* ===== VARIABLES CSS ===== */
        :root {
            --primary-blue: #3D5FAC;
            --primary-white: #ffffff;
            --primary-black: #1a1a1a;
            --secondary-gray: #666666;
            --secondary-dark-blue: #2a4490;
            --transition-fast: all 0.3s ease;
            --shadow-medium: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        /* ===== CATEGOR√çAS STICKY ===== */
        .page-header {
            background: #f8f9fa;
            padding: 20px 0 0;
            margin-top: 80px;
            border-bottom: none;
            position: relative;
            z-index: 100;
        }

        .categories-container-full {
            display: grid !important;
            grid-template-columns: repeat(6, 1fr) !important;
            gap: 0 !important;
            margin: 0 !important;
            padding: 10px 0 !important;
            background: var(--primary-white) !important;
            position: sticky !important;
            top: 80px !important;
            z-index: 998 !important;
            width: 100vw !important;
            margin-left: calc(-50vw + 50%) !important;
            border-top: 1px solid #e5e7eb !important;
            border-bottom: 2px solid #e5e7eb !important;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1) !important;
        }

        .category-item {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            padding: 6px 4px !important;
            background: var(--primary-white) !important;
            border-right: 1px solid #e5e7eb !important;
            cursor: pointer !important;
            transition: all 0.3s ease !important;
            text-align: center !important;
            min-height: 50px !important;
        }

        .category-item:hover {
            background: #f8f9fa !important;
            transform: translateY(-1px) !important;
        }

        .category-item.active {
            background: var(--primary-white) !important;
            border: 2px solid var(--primary-blue) !important;
            box-shadow: 0 0 0 1px var(--primary-blue) !important;
        }

        .category-image {
            width: 28px !important;
            height: 22px !important;
            margin-bottom: 4px !important;
        }

        .category-photo {
            width: 100% !important;
            height: 100% !important;
            object-fit: contain !important;
        }

        .category-name {
            font-size: 0.7rem !important;
            font-weight: 600 !important;
            color: var(--primary-black) !important;
        }

        .category-count {
            font-size: 0.6rem !important;
            color: var(--secondary-gray) !important;
        }

        /* ===== LAYOUT PRINCIPAL ===== */
        .content-section-full {
            padding: 0 !important;
            background: var(--primary-white) !important;
            margin-top: 0 !important;
        }

        .content-layout-full {
            display: grid !important;
            grid-template-columns: 280px 1fr !important;
            max-width: 100% !important;
            margin: 0 !important;
            gap: 0 !important;
        }

        .sidebar-filters-full {
            background: #f8f9fa !important;
            border-right: 1px solid #e5e7eb !important;
            padding: 20px !important;
            overflow-y: auto !important;
            height: calc(100vh - 160px) !important;
            position: sticky !important;
            top: 150px !important;
        }

        .main-content-full {
            padding: 20px !important;
            background: var(--primary-white) !important;
        }

        /* ===== GRID DE VEH√çCULOS - CORREGIDO ===== */
        .vehicles-grid {
            display: grid !important;
            grid-template-columns: repeat(4, 1fr) !important;
            gap: 1px !important;
            margin-bottom: 30px !important;
            padding: 0 !important;
            background: #e5e7eb !important;
            border: 1px solid #e5e7eb !important;
        }

        /* ===== VEHICLE CARD - CORREGIDO ===== */
        .vehicle-card {
            background: var(--primary-white) !important;
            border: none !important;
            border-radius: 0 !important;
            overflow: hidden !important;
            transition: all 0.2s ease !important;
            cursor: pointer !important;
            position: relative !important;
            box-shadow: none !important;
            display: flex !important;
            flex-direction: column !important;
            min-height: 300px !important;
        }

        .vehicle-card:hover {
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15) !important;
            transform: translateY(-2px) scale(1.02) !important;
            z-index: 10 !important;
            border-radius: 8px !important;
        }

        /* ===== IMAGEN DEL VEH√çCULO ===== */
        .vehicle-image {
            position: relative !important;
            height: 160px !important;
            overflow: hidden !important;
            background: #f8f9fa !important;
            flex-shrink: 0 !important;
        }

        .vehicle-image img {
            width: 100% !important;
            height: 100% !important;
            object-fit: cover !important;
            transition: transform 0.3s ease !important;
        }

        .vehicle-card:hover .vehicle-image img {
            transform: scale(1.05) !important;
        }

        /* ===== STATUS BADGE ===== */
        .vehicle-status {
            position: absolute !important;
            top: 8px !important;
            left: 8px !important;
            background: rgba(40, 167, 69, 0.9) !important;
            color: white !important;
            padding: 4px 8px !important;
            border-radius: 12px !important;
            font-size: 0.7rem !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
        }

        .vehicle-status.reserved {
            background: rgba(255, 193, 7, 0.9) !important;
            color: #000 !important;
        }

        .vehicle-status.sold {
            background: rgba(220, 53, 69, 0.9) !important;
        }

        .vehicle-featured {
            position: absolute !important;
            top: 8px !important;
            right: 8px !important;
            background: rgba(255, 193, 7, 0.9) !important;
            color: #000 !important;
            padding: 4px 8px !important;
            border-radius: 12px !important;
            font-size: 0.65rem !important;
            font-weight: 600 !important;
        }

        /* ===== CONTENIDO DEL VEH√çCULO ===== */
        .vehicle-content {
            padding: 15px !important;
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
        }

        .vehicle-title {
            font-size: 1rem !important;
            font-weight: 700 !important;
            color: var(--primary-black) !important;
            margin-bottom: 8px !important;
            line-height: 1.2 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.3px !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            display: -webkit-box !important;
            -webkit-line-clamp: 2 !important;
            -webkit-box-orient: vertical !important;
        }

        .vehicle-subtitle {
            font-size: 0.8rem !important;
            color: var(--secondary-gray) !important;
            margin-bottom: 12px !important;
            line-height: 1.3 !important;
            overflow: hidden !important;
            text-overflow: ellipsis !important;
            display: -webkit-box !important;
            -webkit-line-clamp: 2 !important;
            -webkit-box-orient: vertical !important;
        }

        /* ===== ESPECIFICACIONES ===== */
        .vehicle-specs {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 8px !important;
            margin-bottom: 12px !important;
        }

        .vehicle-spec {
            display: flex !important;
            align-items: center !important;
            gap: 6px !important;
            font-size: 0.75rem !important;
            color: var(--secondary-gray) !important;
            padding: 2px 0 !important;
        }

        .vehicle-spec-icon {
            width: 16px !important;
            height: 16px !important;
            font-size: 14px !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            flex-shrink: 0 !important;
        }

        .vehicle-spec-value {
            font-weight: 600 !important;
            color: var(--primary-black) !important;
            font-size: 0.75rem !important;
        }

        /* ===== FOOTER DEL VEH√çCULO ===== */
        .vehicle-footer {
            padding: 10px 15px !important;
            background: #f8f9fa !important;
            border-top: 1px solid #e5e7eb !important;
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            margin-top: auto !important;
        }

        .vehicle-location {
            display: flex !important;
            align-items: center !important;
            gap: 6px !important;
            font-size: 0.75rem !important;
            color: var(--secondary-gray) !important;
            text-align: center !important;
        }

        /* ===== ESTADOS DE CARGA ===== */
        .loading-state, .empty-state, .error-state, .connection-error {
            grid-column: 1 / -1;
            padding: 60px 20px;
            text-align: center;
            color: #666;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 400px;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid var(--primary-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .btn-retry {
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px 5px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-retry:hover {
            background: var(--secondary-dark-blue);
            transform: translateY(-2px);
        }

        /* ===== ANIMACIONES ===== */
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s ease forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 1200px) {
            .vehicles-grid {
                grid-template-columns: repeat(3, 1fr) !important;
            }
        }

        @media (max-width: 768px) {
            .vehicles-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .content-layout-full {
                grid-template-columns: 1fr !important;
            }
            
            .sidebar-filters-full {
                display: none;
            }
        }

        @media (max-width: 480px) {
            .vehicles-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* ===== FILTROS (mantengo solo lo esencial) ===== */
        .filter-group {
            margin-bottom: 15px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            overflow: hidden;
        }

        .filter-title {
            padding: 15px;
            background: #f8f9fa;
            cursor: pointer;
            font-weight: 600;
            border: none;
            width: 100%;
            text-align: left;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .filter-content {
            padding: 15px;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            padding: 8px 0;
            cursor: pointer;
        }

        .filter-checkbox input {
            margin-right: 10px;
        }

        /* ===== RESULTS HEADER ===== */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e5e7eb;
        }

        .results-tabs {
            display: flex;
            gap: 10px;
        }

        .tab-btn {
            padding: 10px 16px;
            background: #f8f9fa;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .tab-btn.active {
            background: white;
            border-bottom: 2px solid var(--primary-blue);
        }

        .sort-dropdown {
            position: relative;
        }

        .sort-btn {
            padding: 10px 16px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sort-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            z-index: 100;
            min-width: 180px;
            display: none;
        }

        .sort-option {
            display: block;
            width: 100%;
            padding: 12px 16px;
            border: none;
            background: none;
            text-align: left;
            cursor: pointer;
        }

        .sort-option:hover {
            background: #f8f9fa;
        }

        .sort-option.active {
            background: var(--primary-blue);
            color: white;
        }

        /* ===== FILTROS M√ìVILES ===== */
        .mobile-filter-toggle {
            display: none;
            background: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 15px;
            align-items: center;
            gap: 8px;
        }

        @media (max-width: 768px) {
            .mobile-filter-toggle {
                display: flex;
            }
        }

        .filter-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 999;
        }

        .filter-overlay.active {
            display: block;
        }

        @media (max-width: 768px) {
            .sidebar-filters-full {
                position: fixed;
                top: 0;
                left: -100%;
                height: 100vh;
                z-index: 1000;
                transition: left 0.3s ease;
                display: block;
            }

            .sidebar-filters-full.active {
                left: 0;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-logo">
                    <a href="../index.html">
                        <img src="../assets/LOGO WEB.png" alt="Larrosa Camiones" class="logo">
                    </a>
                </div>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="../index.html" class="nav-link">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a href="unidadesDisponibles.html" class="nav-link active">Unidades Disponibles</a>
                    </li>
                    <li class="nav-item">
                        <a href="LarrosaCamiones.html" class="nav-link">Sobre Nosotros</a>
                    </li>
                    <li class="nav-item">
                        <a href="contacto.html" class="nav-link">Contacto</a>
                    </li>
                </ul>
                <div class="nav-button">
                    <a href="LarrosaCamiones.html#randon" class="btn-special">
                        <img src="../assets/Logo negro sin fondo.png" alt="Randon" class="btn-icon">
                    </a>
                </div>
                <div class="hamburger">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </div>
            </div>
        </nav>
    </header>

    <main id="main-content">
        <!-- Page Header -->
        <section class="page-header">
                <!-- Vehicle Categories Bar -->
                <div class="categories-container-full">
                    <div class="category-item active" data-category="all">
                        <div class="category-image">
                            <img src="../assets/imagenes/IMG_8670(1).JPEG" alt="Todos los veh√≠culos" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Todos</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                    
                    <div class="category-item" data-category="camion-tractor">
                        <div class="category-image">
                            <img src="../assets/Camion Tractor.png" alt="Cami√≥n Tractor" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Cami√≥n Tractor</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                    
                    <div class="category-item" data-category="camion-chasis">
                        <div class="category-image">
                            <img src="../assets/Camion Chasis.png" alt="Cami√≥n Chasis" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Cami√≥n Chasis</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                    
                    <div class="category-item" data-category="remolques">
                        <div class="category-image">
                            <img src="../assets/Remolques.png" alt="Remolques" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Remolques</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                    
                    <div class="category-item" data-category="utilitarios">
                        <div class="category-image">
                            <img src="../assets/Utilitarios.png" alt="Utilitarios" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Utilitarios</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                    
                    <div class="category-item" data-category="varios">
                        <div class="category-image">
                            <img src="../assets/Varios.png" alt="Varios" class="category-photo">
                        </div>
                        <div class="category-info">
                            <span class="category-name">Varios</span>
                            <span class="category-count">(0)</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Main Content with Sidebar -->
        <section class="content-section-full">
            <div class="content-layout-full">
                <!-- Sidebar de Filtros -->
<aside class="sidebar-filters-full">
    <!-- B√∫squeda mejorada -->
    <div class="filter-search">
        <div class="search-input-wrapper">
            <i class="fas fa-search search-icon"></i>
            <input 
                type="text" 
                id="filter-search" 
                class="filter-search-input" 
                placeholder="Buscar marca, modelo..."
                autocomplete="off">
            <i class="fas fa-times clear-icon" id="clear-search" style="display: none;"></i>
        </div>
    </div>

    <!-- Filtro de A√±o -->
    <div class="filter-group expanded">
        <button class="filter-title" onclick="toggleFilterGroup(this)">
            <span>
                <i class="fas fa-calendar-alt"></i>
                A√±o
            </span>
            <i class="fas fa-chevron-down collapse-icon"></i>
        </button>
        <div class="filter-content" style="display: block;">
            <div class="range-filter">
                <div class="range-inputs">
                    <input 
                        type="number" 
                        id="year-min" 
                        class="range-input" 
                        placeholder="Desde"
                        min="2000"
                        max="2025">
                    <span class="range-separator">‚Äî</span>
                    <input 
                        type="number" 
                        id="year-max" 
                        class="range-input" 
                        placeholder="Hasta"
                        min="2000"
                        max="2025">
                </div>
                <div class="range-slider">
                    <input 
                        type="range" 
                        id="year-slider" 
                        class="slider" 
                        min="2000" 
                        max="2025" 
                        value="2025">
                </div>
                <div class="range-labels">
                    <span class="range-label-min">2000</span>
                    <span class="range-label-max">2025</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Filtro de Kil√≥metros -->
    <div class="filter-group expanded">
        <button class="filter-title" onclick="toggleFilterGroup(this)">
            <span>
                <i class="fas fa-road"></i>
                Kil√≥metros
            </span>
            <i class="fas fa-chevron-down collapse-icon"></i>
        </button>
        <div class="filter-content" style="display: block;">
            <div class="range-filter">
                <div class="range-inputs">
                    <input 
                        type="number" 
                        id="km-min" 
                        class="range-input" 
                        placeholder="Desde"
                        min="0"
                        max="1000000"
                        step="10000">
                    <span class="range-separator">‚Äî</span>
                    <input 
                        type="number" 
                        id="km-max" 
                        class="range-input" 
                        placeholder="Hasta"
                        min="0"
                        max="1000000"
                        step="10000">
                </div>
                <div class="range-slider">
                    <input 
                        type="range" 
                        id="km-slider" 
                        class="slider" 
                        min="0" 
                        max="1000000" 
                        value="500000"
                        step="10000">
                </div>
                <div class="range-labels">
                    <span class="range-label-min">0 km</span>
                    <span class="range-label-max">1,000,000 km</span>
                </div>
            </div>
        </div>
    </div>

    
    <!-- Filtro de Marca -->
    <div class="filter-group expanded">
        <button class="filter-title" onclick="toggleFilterGroup(this)">
            <span>
                <i class="fas fa-building"></i>
                Marca
            </span>
            <i class="fas fa-chevron-down collapse-icon"></i>
        </button>
        <div class="filter-content" style="display: block;">
            <div class="filter-options">
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="scania">
                    <span class="checkmark"></span>
                    <span class="option-text">Scania</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="volvo">
                    <span class="checkmark"></span>
                    <span class="option-text">Volvo</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="mercedes">
                    <span class="checkmark"></span>
                    <span class="option-text">Mercedes-Benz</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="iveco">
                    <span class="checkmark"></span>
                    <span class="option-text">Iveco</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="volkswagen">
                    <span class="checkmark"></span>
                    <span class="option-text">Volkswagen</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="renault">
                    <span class="checkmark"></span>
                    <span class="option-text">Renault</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="marca" value="ford">
                    <span class="checkmark"></span>
                    <span class="option-text">Ford</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Filtro de Tracci√≥n -->
    <div class="filter-group expanded">
        <button class="filter-title" onclick="toggleFilterGroup(this)">
            <span>
                <i class="fas fa-cogs"></i>
                Tracci√≥n
            </span>
            <i class="fas fa-chevron-down collapse-icon"></i>
        </button>
        <div class="filter-content" style="display: block;">
            <div class="filter-options">
                <label class="filter-checkbox">
                    <input type="checkbox" name="traccion" value="4x2">
                    <span class="checkmark"></span>
                    <span class="option-text">4x2</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="traccion" value="6x2">
                    <span class="checkmark"></span>
                    <span class="option-text">6x2</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="traccion" value="6x4">
                    <span class="checkmark"></span>
                    <span class="option-text">6x4</span>
                </label>
            </div>
        </div>
    </div>

    <!-- Filtro de Transmisi√≥n -->
    <div class="filter-group expanded">
        <button class="filter-title" onclick="toggleFilterGroup(this)">
            <span>
                <i class="fas fa-exchange-alt"></i>
                Transmisi√≥n
            </span>
            <i class="fas fa-chevron-down collapse-icon"></i>
        </button>
        <div class="filter-content" style="display: block;">
            <div class="filter-options">
                <label class="filter-checkbox">
                    <input type="checkbox" name="transmision" value="manual">
                    <span class="checkmark"></span>
                    <span class="option-text">Manual</span>
                </label>
                <label class="filter-checkbox">
                    <input type="checkbox" name="transmision" value="automatica">
                    <span class="checkmark"></span>
                    <span class="option-text">Autom√°tica</span>
                </label>
            </div>
        </div>
    </div>

    
</aside>

                <!-- Main Content Area -->
                <div class="main-content-full">
                    <!-- Mobile Filter Toggle -->
                    <button class="mobile-filter-toggle">
                        <i class="fas fa-filter"></i>
                        <span>Filtros</span>
                    </button>

                    <!-- Results Header -->
                    <div class="results-header">
                        <div class="results-info">
                            <div class="results-tabs">
                                <button class="tab-btn active">
                                    <span>informaci√≥n</span>
                                </button>
                                <button class="tab-btn">
                                    <span><strong><span id="total-vehicles">0</span> veh√≠culos encontrados</strong></span>
                                </button>
                            </div>
                        </div>
                        <div class="results-controls">
                            <div class="sort-dropdown">
                                <button class="sort-btn">
                                    <span>Clasificar Por</span>
                                    <i class="fas fa-chevron-down"></i>
                                </button>
                                <div class="sort-menu">
                                    <button class="sort-option active" data-sort="relevance">Relevancia</button>
                                    <button class="sort-option" data-sort="year-desc">A√±o: m√°s nuevo</button>
                                    <button class="sort-option" data-sort="year-asc">A√±o: m√°s viejo</button>
                                    <button class="sort-option" data-sort="km-asc">Menor kilometraje</button>
                                    <button class="sort-option" data-sort="km-desc">Mayor kilometraje</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Grid de Veh√≠culos - CORREGIDO -->
                    <div class="vehicles-grid" id="vehicles-grid">
                        <div class="loading-state" id="loading-state">
                            <div class="loading-spinner"></div>
                            <h3>üîÑ Cargando veh√≠culos</h3>
                            <p>Conectando con la base de datos...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Overlay para m√≥vil -->
    <div class="filter-overlay" id="filter-overlay"></div>
    
    <!-- Footer b√°sico -->
    <footer style="padding: 40px 0; background: #f8f9fa; text-align: center;">
        <div class="container">
            <p>&copy; 2025 Larrosa Camiones. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- JAVASCRIPT CORREGIDO -->
    <script>
        // ===== API CLIENT CORREGIDO =====
        class APIClient {
            constructor() {
                this.baseURL = 'http://localhost:8000/api/v1';
                this.timeout = 10000;
            }

            async request(endpoint, options = {}) {
                const url = `${this.baseURL}${endpoint}`;
                const config = {
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    },
                    signal: AbortSignal.timeout(this.timeout),
                    ...options
                };

                try {
                    console.log(`üåê API Request: ${config.method || 'GET'} ${url}`);
                    
                    const response = await fetch(url, config);
                    
                    if (!response.ok) {
                        let errorData;
                        try {
                            errorData = await response.json();
                        } catch {
                            errorData = { detail: `HTTP ${response.status}: ${response.statusText}` };
                        }
                        throw new Error(errorData.detail || `HTTP ${response.status}: ${response.statusText}`);
                    }

                    const data = await response.json();
                    console.log(`‚úÖ API Response:`, data);
                    return data;

                } catch (error) {
                    console.error(`‚ùå API Error:`, error);
                    
                    if (error.name === 'AbortError') {
                        throw new Error('La solicitud tard√≥ demasiado tiempo');
                    }
                    
                    if (error.message && error.message.includes('Failed to fetch')) {
                        throw new Error('Error de conexi√≥n. Verifique que el backend est√© funcionando.');
                    }
                    
                    throw error;
                }
            }

            async getVehicles(params = {}) {
                const validParams = {};
                
                if (params.skip !== undefined) validParams.skip = params.skip;
                if (params.limit !== undefined) validParams.limit = Math.min(params.limit, 100);
                if (params.search) validParams.search = params.search;
                if (params.vehicle_type) validParams.vehicle_type = params.vehicle_type;
                if (params.brand) validParams.brand = params.brand;
                if (params.year_min) validParams.year_min = params.year_min;
                if (params.year_max) validParams.year_max = params.year_max;
                if (params.km_min) validParams.km_min = params.km_min;
                if (params.km_max) validParams.km_max = params.km_max;
                if (params.status) validParams.status = params.status;
                if (params.is_featured !== undefined) validParams.is_featured = params.is_featured;

                const queryString = new URLSearchParams(validParams).toString();
                const endpoint = `/vehicles${queryString ? `?${queryString}` : ''}`;
                return await this.request(endpoint);
            }

            getImageUrl(imageData) {
                if (!imageData) {
                    return '../assets/imagenes/placeholder-vehicle.jpg';
                }
                
                if (typeof imageData === 'string') {
                    if (imageData.startsWith('http')) {
                        return imageData;
                    }
                    
                    if (imageData.startsWith('/static') || imageData.startsWith('static')) {
                        return `${this.baseURL.replace('/api/v1', '')}/${imageData.replace(/^\//, '')}`;
                    }
                    
                    return imageData;
                }
                
                if (typeof imageData === 'object') {
                    const imagePath = imageData.file_path || imageData.filename || imageData.url || imageData.path;
                    if (imagePath) {
                        return this.getImageUrl(imagePath);
                    }
                }
                
                return '../assets/imagenes/placeholder-vehicle.jpg';
            }
        }

        // ===== VARIABLES GLOBALES =====
        let vehiclesData = [];
        let filteredVehicles = [];
        let currentFilters = {
            category: 'all',
            search: '',
            tipo: [],
            marca: []
        };
        let isLoading = false;
        let currentPage = 1;
        let vehiclesPerPage = 24;
        let currentSort = 'relevance';

        // ===== CLASE PRINCIPAL =====
        class UnidadesDisponiblesAPI {
            constructor() {
                this.apiClient = new APIClient();
                this.init();
            }

            async init() {
                console.log('üöõ Iniciando Unidades Disponibles con API...');
                
                const connected = await this.testConnection();
                
                if (connected) {
                    console.log('‚úÖ Conectado a la API');
                    await this.loadVehicles();
                } else {
                    console.warn('‚ö†Ô∏è API no disponible');
                    this.showConnectionError();
                }
                
                this.setupCategories();
                this.setupFilters();
                this.setupUI();
                this.checkURLFilters();
            }

            async testConnection() {
                try {
                    const response = await fetch('http://localhost:8000/health');
                    if (response.ok) {
                        this.showConnectionStatus(true);
                        return true;
                    }
                    return false;
                } catch (error) {
                    console.error('‚ùå Error de conexi√≥n:', error);
                    this.showConnectionStatus(false);
                    return false;
                }
            }

            async loadVehicles() {
                try {
                    this.showLoading(true);
                    console.log('üì¶ Cargando veh√≠culos desde API...');
                    
                    const response = await this.apiClient.getVehicles({ 
                        skip: 0, 
                        limit: 100
                    });
                    
                    console.log('üìä Respuesta de la API:', response);

                    if (response && response.vehicles && Array.isArray(response.vehicles)) {
                        vehiclesData = response.vehicles;
                        filteredVehicles = [...vehiclesData];
                        
                        console.log(`‚úÖ ${vehiclesData.length} veh√≠culos cargados`);
                        
                        this.updateVehicleCount(vehiclesData.length);
                        this.updateCategoryCounters();
                        this.renderVehicles();
                        
                    } else if (response && Array.isArray(response)) {
                        vehiclesData = response;
                        filteredVehicles = [...vehiclesData];
                        
                        console.log(`‚úÖ ${vehiclesData.length} veh√≠culos cargados (formato directo)`);
                        
                        this.updateVehicleCount(vehiclesData.length);
                        this.updateCategoryCounters();
                        this.renderVehicles();
                        
                    } else {
                        console.warn('‚ö†Ô∏è Estructura de datos inesperada:', response);
                        this.showEmptyState('No se encontraron veh√≠culos');
                    }

                } catch (error) {
                    console.error('‚ùå Error cargando veh√≠culos:', error);
                    this.showError(`Error cargando veh√≠culos: ${error.message}`);
                } finally {
                    this.showLoading(false);
                }
            }

            // ===== RENDERIZAR VEH√çCULOS - CORREGIDO =====
            renderVehicles() {
                const grid = document.getElementById('vehicles-grid');
                if (!grid) {
                    console.error('‚ùå Grid de veh√≠culos no encontrado');
                    return;
                }

                console.log(`üé® Renderizando ${filteredVehicles.length} veh√≠culos...`);

                if (filteredVehicles.length === 0) {
                    this.showEmptyState('No se encontraron veh√≠culos con los filtros seleccionados');
                    return;
                }

                // Limpiar grid y asegurar que tenga la clase correcta
                grid.innerHTML = '';
                grid.className = 'vehicles-grid'; // FORZAR CLASE CORRECTA

                // Crear cards
                const vehiclesToShow = filteredVehicles.slice(0, currentPage * vehiclesPerPage);
                vehiclesToShow.forEach((vehicle, index) => {
                    const card = this.createVehicleCard(vehicle);
                    if (card) {
                        card.style.animationDelay = `${index * 0.05}s`;
                        card.classList.add('fade-in');
                        grid.appendChild(card);
                    }
                });

                console.log(`‚úÖ ${vehiclesToShow.length} tarjetas renderizadas`);
            }

            // ===== CREAR TARJETA DE VEH√çCULO - CORREGIDO =====
            createVehicleCard(vehicle) {
                if (!vehicle) {
                    console.warn('‚ö†Ô∏è Veh√≠culo inv√°lido:', vehicle);
                    return null;
                }

                const card = document.createElement('div');
                card.className = 'vehicle-card';
                card.dataset.vehicleId = vehicle.id;
                card.dataset.vehicleData = JSON.stringify(vehicle);

                // MAPEAR PROPIEDADES DEL BACKEND A LO QUE ESPERA EL FRONTEND
                const vehicleData = {
                    id: vehicle.id,
                    // Manejar diferentes nombres de propiedades
                    fullName: vehicle.full_name || vehicle.fullName || `${vehicle.brand || ''} ${vehicle.model || ''}`.trim(),
                    brand: vehicle.brand || 'Marca no especificada',
                    model: vehicle.model || 'Modelo no especificado',
                    year: vehicle.year || 'N/A',
                    kilometers: vehicle.kilometers || vehicle.km || 0,
                    power: vehicle.power || vehicle.hp || 0,
                    transmission: vehicle.transmission || 'Manual',
                    type: vehicle.type || vehicle.vehicle_type || 'varios',
                    status: vehicle.status || 'Disponible',
                    location: vehicle.location || 'Villa Mar√≠a, C√≥rdoba',
                    description: vehicle.description || vehicle.type_name || vehicle.typeName || 'Veh√≠culo comercial',
                    images: vehicle.images || [],
                    is_featured: vehicle.is_featured || false
                };

                // Imagen del veh√≠culo
                const imageUrl = this.getVehicleImageUrl(vehicleData);
                
                // Estado del veh√≠culo
                const statusClass = this.getStatusClass(vehicleData.status);

                card.innerHTML = `
                    <div class="vehicle-image">
                        <img src="${imageUrl}" 
                             alt="${vehicleData.fullName}" 
                             loading="lazy"
                             onerror="this.src='../assets/imagenes/placeholder-vehicle.jpg'">
                        <div class="vehicle-status ${statusClass}">
                            ${vehicleData.status}
                        </div>
                        ${vehicleData.is_featured ? '<div class="vehicle-featured">‚≠ê Destacado</div>' : ''}
                    </div>
                    <div class="vehicle-content">
                        <h3 class="vehicle-title">${vehicleData.fullName}</h3>
                        <p class="vehicle-subtitle">${vehicleData.description}</p>
                        <div class="vehicle-specs">
                            <div class="vehicle-spec">
                                <span class="vehicle-spec-icon">üìÖ</span>
                                <span class="vehicle-spec-value">${vehicleData.year}</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="vehicle-spec-icon">üõ£Ô∏è</span>
                                <span class="vehicle-spec-value">${this.formatNumber(vehicleData.kilometers)} km</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="vehicle-spec-icon">‚öôÔ∏è</span>
                                <span class="vehicle-spec-value">${vehicleData.transmission}</span>
                            </div>
                            <div class="vehicle-spec">
                                <span class="vehicle-spec-icon">üîã</span>
                                <span class="vehicle-spec-value">${vehicleData.power} HP</span>
                            </div>
                        </div>
                    </div>
                    <div class="vehicle-footer">
                        <div class="vehicle-location">
                            <span>üá¶üá∑</span>
                            <span>${vehicleData.location}</span>
                        </div>
                    </div>
                `;

                // Event listener para click
                card.addEventListener('click', () => {
                    this.goToVehicleDetail(vehicleData);
                });

                return card;
            }

            setupCategories() {
                const categoryItems = document.querySelectorAll('.category-item');
                
                categoryItems.forEach(item => {
                    item.addEventListener('click', () => {
                        categoryItems.forEach(cat => cat.classList.remove('active'));
                        item.classList.add('active');
                        
                        const category = item.dataset.category;
                        this.filterByCategory(category);
                    });
                });
            }

            setupFilters() {
                const searchInput = document.getElementById('filter-search');
                if (searchInput) {
                    searchInput.addEventListener('input', this.debounce((e) => {
                        currentFilters.search = e.target.value.toLowerCase();
                        this.applyFilters();
                    }, 300));
                }

                const clearBtn = document.querySelector('.clear-all-btn');
                if (clearBtn) {
                    clearBtn.addEventListener('click', () => {
                        this.clearAllFilters();
                    });
                }

                const typeCheckboxes = document.querySelectorAll('input[name="tipo"]');
                typeCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        this.handleCheckboxFilter('tipo', checkbox);
                    });
                });

                const brandCheckboxes = document.querySelectorAll('input[name="marca"]');
                brandCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', () => {
                        this.handleCheckboxFilter('marca', checkbox);
                    });
                });
            }

            setupUI() {
                const sortBtn = document.querySelector('.sort-btn');
                const sortMenu = document.querySelector('.sort-menu');
                const sortOptions = document.querySelectorAll('.sort-option');

                if (sortBtn && sortMenu) {
                    sortBtn.addEventListener('click', () => {
                        sortMenu.style.display = sortMenu.style.display === 'block' ? 'none' : 'block';
                    });
                }

                sortOptions.forEach(option => {
                    option.addEventListener('click', () => {
                        const sortType = option.dataset.sort;
                        this.sortVehicles(sortType);
                        sortMenu.style.display = 'none';
                        
                        sortOptions.forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                        sortBtn.querySelector('span').textContent = option.textContent;
                    });
                });

                this.setupMobileToggle();
            }

            setupMobileToggle() {
                const toggleBtn = document.querySelector('.mobile-filter-toggle');
                const sidebar = document.querySelector('.sidebar-filters-full');
                const overlay = document.getElementById('filter-overlay');

                if (toggleBtn && sidebar && overlay) {
                    toggleBtn.addEventListener('click', () => {
                        sidebar.classList.toggle('active');
                        overlay.classList.toggle('active');
                        document.body.style.overflow = sidebar.classList.contains('active') ? 'hidden' : 'auto';
                    });

                    overlay.addEventListener('click', () => {
                        sidebar.classList.remove('active');
                        overlay.classList.remove('active');
                        document.body.style.overflow = 'auto';
                    });
                }
            }

            checkURLFilters() {
                const urlParams = new URLSearchParams(window.location.search);
                
                const category = urlParams.get('category') || urlParams.get('filter');
                if (category && category !== 'all') {
                    console.log(`üè∑Ô∏è Filtro de categor√≠a desde URL: ${category}`);
                    
                    const categoryItems = document.querySelectorAll('.category-item');
                    categoryItems.forEach(item => {
                        item.classList.remove('active');
                        if (item.dataset.category === category) {
                            item.classList.add('active');
                        }
                    });
                    
                    currentFilters.category = category;
                    this.applyFilters();
                }
                
                const search = urlParams.get('search');
                if (search) {
                    currentFilters.search = search;
                    const searchInput = document.getElementById('filter-search');
                    if (searchInput) {
                        searchInput.value = search;
                    }
                    this.applyFilters();
                }
            }

            filterByCategory(category) {
                console.log(`üè∑Ô∏è Filtrando por categor√≠a: ${category}`);
                currentFilters.category = category;
                this.applyFilters();
            }

            handleCheckboxFilter(filterName, checkbox) {
                if (!currentFilters[filterName]) {
                    currentFilters[filterName] = [];
                }

                if (checkbox.checked) {
                    if (!currentFilters[filterName].includes(checkbox.value)) {
                        currentFilters[filterName].push(checkbox.value);
                    }
                } else {
                    currentFilters[filterName] = currentFilters[filterName].filter(val => val !== checkbox.value);
                }

                this.applyFilters();
            }

            applyFilters() {
                console.log('üîç Aplicando filtros:', currentFilters);
                
                filteredVehicles = vehiclesData.filter(vehicle => {
                    // Mapear propiedades para compatibilidad
                    const vehicleType = vehicle.type || vehicle.vehicle_type || 'varios';
                    const vehicleBrand = vehicle.brand || '';
                    const vehicleName = vehicle.full_name || vehicle.fullName || `${vehicleBrand} ${vehicle.model || ''}`;
                    
                    // Filtro por categor√≠a
                    if (currentFilters.category && currentFilters.category !== 'all') {
                        if (vehicleType !== currentFilters.category) {
                            return false;
                        }
                    }
                    
                    // Filtro por b√∫squeda
                    if (currentFilters.search) {
                        const searchText = `${vehicleBrand} ${vehicle.model} ${vehicleName}`.toLowerCase();
                        if (!searchText.includes(currentFilters.search)) {
                            return false;
                        }
                    }

                    // Filtro por tipo
                    if (currentFilters.tipo && currentFilters.tipo.length > 0) {
                        if (!currentFilters.tipo.includes(vehicleType)) {
                            return false;
                        }
                    }

                    // Filtro por marca
                    if (currentFilters.marca && currentFilters.marca.length > 0) {
                        const brandMatches = currentFilters.marca.some(marca => 
                            vehicleBrand.toLowerCase().includes(marca.toLowerCase())
                        );
                        if (!brandMatches) {
                            return false;
                        }
                    }

                    return true;
                });
                
                console.log(`üìä ${filteredVehicles.length} veh√≠culos despu√©s del filtro`);
                
                currentPage = 1;
                this.updateVehicleCount(filteredVehicles.length);
                this.renderVehicles();
            }

            clearAllFilters() {
                currentFilters = {
                    category: 'all',
                    search: '',
                    tipo: [],
                    marca: []
                };
                
                const searchInput = document.getElementById('filter-search');
                if (searchInput) searchInput.value = '';
                
                document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                    cb.checked = false;
                });
                
                document.querySelectorAll('.category-item').forEach(item => {
                    item.classList.remove('active');
                });
                document.querySelector('[data-category="all"]')?.classList.add('active');
                
                this.applyFilters();
            }

            sortVehicles(sortType) {
                console.log(`üìä Ordenando por: ${sortType}`);
                currentSort = sortType;
                
                filteredVehicles.sort((a, b) => {
                    switch (sortType) {
                        case 'year-desc':
                            return (b.year || 0) - (a.year || 0);
                        case 'year-asc':
                            return (a.year || 0) - (b.year || 0);
                        case 'km-asc':
                            return (a.kilometers || a.km || 0) - (b.kilometers || b.km || 0);
                        case 'km-desc':
                            return (b.kilometers || b.km || 0) - (a.kilometers || a.km || 0);
                        case 'relevance':
                        default:
                            if (a.is_featured && !b.is_featured) return -1;
                            if (!a.is_featured && b.is_featured) return 1;
                            return new Date(b.created_at || b.date_added || 0) - new Date(a.created_at || a.date_added || 0);
                    }
                });
                
                this.renderVehicles();
            }

            // ===== UTILIDADES =====
            getVehicleImageUrl(vehicle) {
                if (vehicle.images && vehicle.images.length > 0) {
                    return this.apiClient.getImageUrl(vehicle.images[0]);
                }
                return '../assets/imagenes/placeholder-vehicle.jpg';
            }

            getStatusClass(status) {
                if (!status) return 'available';
                
                const statusLower = status.toLowerCase();
                if (statusLower.includes('disponible')) return 'available';
                if (statusLower.includes('reservado')) return 'reserved';
                if (statusLower.includes('vendido')) return 'sold';
                return 'available';
            }

            formatNumber(num) {
                if (!num) return '0';
                return new Intl.NumberFormat('es-AR').format(num);
            }

            updateVehicleCount(count) {
                const totalElement = document.getElementById('total-vehicles');
                if (totalElement) {
                    totalElement.textContent = count;
                }
            }

            updateCategoryCounters() {
                const categoryCounts = {
                    'all': vehiclesData.length
                };
                
                vehiclesData.forEach(vehicle => {
                    const type = vehicle.type || vehicle.vehicle_type || 'varios';
                    categoryCounts[type] = (categoryCounts[type] || 0) + 1;
                });
                
                document.querySelectorAll('.category-item').forEach(item => {
                    const category = item.dataset.category;
                    const countElement = item.querySelector('.category-count');
                    
                    if (countElement && categoryCounts[category] !== undefined) {
                        countElement.textContent = `(${categoryCounts[category]})`;
                    }
                });
                
                console.log('üìä Contadores actualizados:', categoryCounts);
            }

            goToVehicleDetail(vehicle) {
                console.log(`üîó Navegando al detalle del veh√≠culo: ${vehicle.fullName}`);
                
                sessionStorage.setItem('currentVehicle', JSON.stringify(vehicle));
                window.location.href = `detalleVehiculo.html?id=${vehicle.id}`;
            }

            // ===== ESTADOS DE UI =====
            showLoading(show) {
                const grid = document.getElementById('vehicles-grid');
                
                if (show) {
                    grid.innerHTML = `
                        <div class="loading-state">
                            <div class="loading-spinner"></div>
                            <h3>üîÑ Cargando veh√≠culos</h3>
                            <p>Conectando con la base de datos...</p>
                        </div>
                    `;
                }
                
                isLoading = show;
            }

            showEmptyState(message = 'No hay veh√≠culos disponibles') {
                const grid = document.getElementById('vehicles-grid');
                if (grid) {
                    grid.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-truck"></i>
                            </div>
                            <h3>üöõ Sin veh√≠culos</h3>
                            <p>${message}</p>
                            <button onclick="window.unidadesAPI.loadVehicles()" class="btn-retry">
                                üîÑ Actualizar
                            </button>
                        </div>
                    `;
                }
            }

            showError(message) {
                const grid = document.getElementById('vehicles-grid');
                if (grid) {
                    grid.innerHTML = `
                        <div class="error-state">
                            <div class="error-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <h3>‚ùå Error al cargar veh√≠culos</h3>
                            <p>${message}</p>
                            <div class="error-details">
                                <p><strong>Posibles soluciones:</strong></p>
                                <ul>
                                    <li>Verificar que el backend est√© corriendo en <code>localhost:8000</code></li>
                                    <li>Comprobar que hay veh√≠culos en la base de datos</li>
                                    <li>Revisar la consola para m√°s detalles</li>
                                </ul>
                            </div>
                            <button onclick="window.unidadesAPI.loadVehicles()" class="btn-retry">
                                üîÑ Reintentar
                            </button>
                        </div>
                    `;
                }
            }

            showConnectionError() {
                const grid = document.getElementById('vehicles-grid');
                if (grid) {
                    grid.innerHTML = `
                        <div class="connection-error">
                            <div class="error-icon">
                                <i class="fas fa-wifi-slash"></i>
                            </div>
                            <h3>üîå Sin conexi√≥n a la API</h3>
                            <p>No se puede conectar con el servidor backend.</p>
                            <div class="error-details">
                                <p><strong>Verificar:</strong></p>
                                <ul>
                                    <li>Backend corriendo: <code>docker-compose up -d</code></li>
                                    <li>URL correcta: <code>http://localhost:8000</code></li>
                                    <li>CORS habilitado en el backend</li>
                                </ul>
                            </div>
                            <div class="error-actions">
                                <button onclick="window.unidadesAPI.testConnection().then(connected => connected && window.unidadesAPI.loadVehicles())" class="btn-retry">
                                    üîÑ Probar conexi√≥n
                                </button>
                            </div>
                        </div>
                    `;
                }
            }

            showConnectionStatus(connected) {
                const indicator = document.createElement('div');
                indicator.className = 'connection-status';
                indicator.style.cssText = `
                    position: fixed;
                    top: 80px;
                    right: 20px;
                    padding: 8px 15px;
                    border-radius: 20px;
                    font-size: 0.85rem;
                    font-weight: 600;
                    z-index: 10000;
                    transition: all 0.3s ease;
                    ${connected ? `
                        background: rgba(40, 167, 69, 0.9);
                        color: white;
                    ` : `
                        background: rgba(220, 53, 69, 0.9);
                        color: white;
                    `}
                `;
                
                indicator.innerHTML = `
                    <i class="fas fa-${connected ? 'wifi' : 'wifi-slash'}"></i>
                    ${connected ? 'API Conectada' : 'Sin Conexi√≥n'}
                `;
                
                document.body.appendChild(indicator);
                
                if (connected) {
                    setTimeout(() => {
                        if (indicator.parentNode) {
                            indicator.style.opacity = '0';
                            setTimeout(() => indicator.remove(), 300);
                        }
                    }, 3000);
                }
            }

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }
        }

        // ===== FUNCI√ìN PARA COLAPSAR FILTROS =====
        function toggleFilterGroup(titleElement) {
            const filterGroup = titleElement.closest('.filter-group');
            const content = filterGroup.querySelector('.filter-content');
            const icon = titleElement.querySelector('i');
            
            if (content.style.display === 'none' || !content.style.display) {
                content.style.display = 'block';
                icon.style.transform = 'rotate(180deg)';
            } else {
                content.style.display = 'none';
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // ===== INICIALIZACI√ìN =====
        let unidadesAPI;

        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando Unidades Disponibles API (CORREGIDO)...');
            
            unidadesAPI = new UnidadesDisponiblesAPI();
            
            window.unidadesAPI = unidadesAPI;
            window.toggleFilterGroup = toggleFilterGroup;
            
            console.log('‚úÖ Sistema Unidades Disponibles inicializado');
        });
    </script>
<!-- Al final del body, antes de </body> -->
<script src="../scripts/unidades-fix.js"></script>   
</body>
</html>